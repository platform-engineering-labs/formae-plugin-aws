/*
 * Â© 2025 Platform Engineering Labs Inc.
 *
 * SPDX-License-Identifier: FSL-1.1-ALv2
 */

import "@formae/formae.pkl"
import "@aws/aws.pkl"

projectName = "vpc-example"
region = "us-west-2"
vpcCidr = "10.1.0.0/16"

publicZoneCidrs: Mapping<String, String> = new {
    ["a"] = "10.1.0.0/19"
    ["b"] = "10.1.64.0/19"
    ["c"] = "10.1.128.0/19"
}

privateZoneCidrs: Mapping<String, String> = new {
    ["a"] = "10.1.32.0/19"
    ["b"] = "10.1.96.0/19"
    ["c"] = "10.1.160.0/19"
}

props = new Dynamic {
    name = new formae.Prop {
        flag = "name"
        default = module.projectName
    }
    region = new formae.Prop {
        flag = "region"
        default = module.region
    }
    vpcCidr = new formae.Prop {
        flag = "vpc-cidr"
        default = module.vpcCidr
    }
}

stack: formae.Stack = new {
    label = "vpc-example"
    description = "Stack for VPC infrastructure deployment"
}

target: formae.Target = new formae.Target {
    label = "aws-target"
    config = new aws.Config {
        region = module.props.region.value
    }
}
